<section>
    <mat-card fxLayout="row" fxLayout.xs="column" fxLayoutAlign="space-around end"
            fxLayoutAlign.xs="space-around stretch" class="sorting-container">
        <div fxFlex="25" fxFlex.xs="100">
            <mat-chip-list class="chip">
                <mat-chip color="primary" selected>CATEGORIES</mat-chip>
            </mat-chip-list>
            <mat-form-field fxFlex="100">
                <mat-label>Choose</mat-label>
                <mat-select [formControl]="categoryControl" multiple>
                <mat-option *ngFor="let category of categories" [value]="category.id"
                (click)="filterByCategories(category)">{{category.name}}</mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div fxFlex="5"></div>
            <mat-form-field fxFlex="25" fxFlex.xs="100" class="example-chip-list">
                <mat-chip-list #chipList aria-label="Tag selection">
                    <mat-chip *ngFor="let tag of tags" selectable="true"
                            removable="true" (removed)="remove(tag)">
                        {{tag.name}}
                        <mat-icon matChipRemove *ngIf="true">cancel</mat-icon>
                    </mat-chip>
                    <input placeholder="Write a tag..."
                            [matChipInputFor]="chipList"
                            [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                            matChipInputAddOnBlur="true"
                            (matChipInputTokenEnd)="add($event)">
                    </mat-chip-list>
            </mat-form-field>
            <div fxFlex="5"></div>
            <label fxFlex="40" fxFlex.xs="100" class="pure-material-textfield-outlined relative">
                <input [(ngModel)]="search" (ngModelChange)="initSearch($event)" class="input-padding" placeholder=" ">
                <span class="placeholder">Search</span>
                <span class="sufix"><mat-icon>search</mat-icon></span>
            </label>
    </mat-card>
</section>
<mat-card class="gallery-container">
    <mat-chip-list class="chip">
        <mat-chip color="primary" selected>PICTURES</mat-chip>
    </mat-chip-list>
    <div>
        <div class="sort-date-container">
            <p>Sort by date</p>
            <button mat-flat-button class="sort-date-button" (click)="sortByDate()">
                <mat-icon>{{sortObj.buttonString}}</mat-icon>
            </button>
        </div>
        <div class="upload-picture-container">
                <a [routerLink]="'/upload'"> Upload picture </a>
        </div>
    </div>
    <div fxLayout="row wrap" fxLayoutAlign="space-around center" class="gallery-container">
        <section>
            <mat-card-content>
                <mat-card-header>
                    <div class="res-count-container">Showing: {{resCount | itemsCount}} pictures</div>
                </mat-card-header>
                <div class="photo-container" *ngFor="let item of photos">
                    <app-photo [photo]="item"></app-photo>
                </div>
            </mat-card-content>
        </section>
        <ng-container  *ngIf="isLoaded else loading"></ng-container>
    </div>
</mat-card>

<ng-template #loading class="loading-container">
    <mat-progress-spinner color="warn" mode="indeterminate">
    </mat-progress-spinner>
</ng-template>