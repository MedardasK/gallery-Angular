<mat-card class="gallery-container">
  <div class="link-container">
    <button mat-raised-button [routerLink]="'/'"><mat-icon>keyboard_backspace</mat-icon>Back to gallery</button>
  </div>
  <form [formGroup]="upload">
    <div class="d-flex bd-highlight form-container">
      <div class="d-flex flex-column bd-highlight mb-3 p-2 flex-fill bd-highlight">
        <mat-form-field>
          <input required matInput maxlength="30" formControlName="description" name="description" placeholder="Description">
          <span matPrefix><i class="material-icons">create</i></span>
          <mat-error *ngIf="upload.controls['description'].hasError('required')">Description is required</mat-error>
          <mat-error *ngIf="upload.controls['description'].hasError('minLength')">Description is too short</mat-error>
        </mat-form-field>
        <mat-form-field>
          <mat-label>Select categories</mat-label>
          <mat-select [formControl]="categoryControl" multiple required matInput formControlName="category" name="category">
            <mat-option *ngFor="let cat of categoriesLoad" [value]="cat.id" matInput>
              {{cat.name}}</mat-option>
          </mat-select>
          <mat-error *ngIf="upload.controls['category'].hasError('required')">At least one category is required</mat-error>
        </mat-form-field>
        <mat-form-field>
          <mat-label>Select tags</mat-label>
          <mat-select [formControl]="tagControl" multiple required matInput formControlName="tag" name="tag">
            <mat-option *ngFor="let tagObj of tagsLoad" [value]="tagObj.id">
              {{tagObj.name}}</mat-option>
          </mat-select>
          <mat-error *ngIf="upload.controls['tag'].hasError('required')">At least one tag is required</mat-error>
        </mat-form-field>
        <button mat-raised-button class="tags-categories-button" type="button"
        (click)="openDialogCreate()">Create tags or categories</button>
      </div>
      <div class="dropzone p-2 flex-fill bd-highlight" dropZone (hovered)="toggleHover($event)" (dropped)="startUpload($event)"
        [class.hovering]="isHovering">
        <h3>Drop your image here</h3>
        <div class="file">
          <label class="file-label">
            <input required class="file-input" type="file" formControlName="fileForm"
              (change)="startUpload($event.target.files)" name="file">
            <span class="file-cta">
              <span class="file-icon">
                <i class="fa fa-upload"></i>
              </span>
              <span class="file-label"> or choose a fileâ€¦ </span>
            </span>
          </label>
        </div>
      </div>
    </div>
    <div>&nbsp;</div>
    <div class="submit-container">
      <button mat-raised-button class="submit-button" type="button" [disabled]="!upload.valid"
        (click)="submitValues()">Submit</button>
    </div>
    <div class="d-flex">
      <div class="image-preview-container flex-wrap d-flex" *ngIf="previewUrl">
        <img [src]="previewUrl">
      </div>
    </div>
  </form>
</mat-card>