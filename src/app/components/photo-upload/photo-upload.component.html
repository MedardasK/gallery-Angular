<mat-card class="gallery-container">
  <a [routerLink]="'/'"> Back to gallery </a>
  <form [formGroup]="upload">
    <mat-form-field>
      <input required matInput maxlength="30" formControlName="description" name="description" placeholder="Description">
      <span matPrefix><i class="material-icons">mail_outline</i></span>
    </mat-form-field>
    <mat-form-field>
      <mat-label>Select categories</mat-label>
      <mat-select [formControl]="categoryControl" multiple>
        <mat-option *ngFor="let category of categories" [value]="category.id">
          {{category.name}}</mat-option>
      </mat-select>
    </mat-form-field>
    <div>
      <div class="dropzone" dropZone (hovered)="toggleHover($event)" (dropped)="startUpload($event)"
        [class.hovering]="isHovering">

        <h3>Drop your image here</h3>

        <div class="file">
          <label class="file-label">

            <input class="file-input" type="file" (change)="startUpload($event.target.files)" name="file">
            <span class="file-cta">
              <span class="file-icon">
                <i class="fa fa-upload"></i>
              </span>
              <span class="file-label">
                or choose a fileâ€¦
              </span>
            </span>
          </label>
        </div>
        <mat-error *ngIf="upload.controls['file'].hasError('required')">File is required</mat-error>
      </div>
    </div>
    <div *ngIf="percentage | async as pct">

      <progress class="progress is-info" [value]="pct" max="100">
      </progress>
      {{ pct | number }}%
    </div>

    <div *ngIf="snapshot | async as snap">
      {{ snap.bytesTransferred | fileSize }} of {{ snap.totalBytes | fileSize }}

      <div *ngIf="downloadURL | async as url">
        <!-- <img [src]="data:image/png;base64,{{file.file}}"> -->
      </div>

    </div>
    <button mat-raised-button type="button" [disabled]="!upload.valid" (click)="submitValues()">Submit</button>

  </form>
</mat-card>
